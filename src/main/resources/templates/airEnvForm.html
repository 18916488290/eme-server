<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="fragments/m-layout :: headFragment">
</head>
<body>
	<!-- HEADER -->
	<header class="navbar clearfix navbar-fixed-top" id="header"
		th:include="fragments/m-layout :: headerFragment"> </header>
	<!--/HEADER -->

	<!-- PAGE -->
	<section id="page">
		<!-- SIDEBAR -->
		<div id="sidebar" class="sidebar"
			th:include="fragments/m-layout :: sidebarFragment"></div>
		<!-- /SIDEBAR -->
		<!-- maincontent -->
		<div id="main-content"
			th:include="fragments/m-layout :: main-contentFragment">
			<!-- BREADCRUMBS -->
			<ul class="breadcrumb" id="BREADCRUMBS">
				<li><i class="fa fa-home"></i> <a href="index.html"  th:href="@{/}">主界面</a></li>
				<li><a href="#"  th:href="@{/allRiskSourceList}">风险源管理</a></li>
				<li>气环境</li>
			</ul>
			<!-- /BREADCRUMBS -->

			<!-- mainContentBox -->
			<div id="mainContentBox">
										
								<form class="form-horizontal" method="post" action="#" th:action="@{/saveCompanyAirEnv}" th:object="${companyAirEnv}">
										  <div class="form-group">
											 <label class="col-md-2 control-label">企业名称<span class="required">*</span></label> 
											 <div class="col-md-10">		
												<input type="text"  class="form-control col-md-12" th:field="*{company.companyName}" readonly="readonly"/> 		
												<input type="hidden" th:field="*{company.id}" /> 																		
											 </div>
										  </div>
										  
										 	<div class="form-group">
											 <label class="col-md-2 control-label">保护目标名称(*)</label> 
											 <div class="col-md-10">		
												<select  id="airEnv-select" data-placeholder="选择保护目标名称" class="form-control" th:field="*{airEnv.id}">
                                                  <option value="-1"></option>
                                                  <option th:each="airEnv : ${airEnvs}" 
                                                     th:value="${airEnv.id}" 
                                                     th:text="${airEnv.airEnvName}">保护目标</option>
                                                </select>								
											 </div>
										  </div>
										  
										  	 <div class="form-group">
											 <label class="col-md-2 control-label">类型</label> 
											 <div class="col-md-10">			
                                                <input type="text"  id="airType"  class="form-control col-md-12" th:field="*{airEnv.airEnvType.airEnvType}" readonly="readonly"/> 		
											 </div>
										  </div>
										  
										  
										  <div class="form-group">
											 <label class="col-md-2 control-label">所属环境功能</label> 
											 <div class="col-md-10">		
                                                 <input type="text"  id="envFunc" class="form-control col-md-12" th:field="*{airEnv.envFunc.envFunc}" readonly="readonly"/> 		
											 </div>
										  </div>
										  
										  
											<div class="form-group">
											 <label class="col-md-2 control-label">联系人</label> 
											 <div class="col-md-10">		
												<input type="text"  id="emePerson" class="form-control col-md-12" th:field="*{airEnv.emePerson}" readonly="readonly"/> 								
											 </div>
										  </div>
										  
										  	<div class="form-group">
											 <label class="col-md-2 control-label">联系电话</label> 
											 <div class="col-md-10">		
                                                <input type="text" id="emeMobile"  class="form-control col-md-12" th:field="*{airEnv.emeMobile}" readonly="readonly"/> 
											 </div>
										  </div>
										  
										  		<div class="form-group">
											 <label class="col-md-2 control-label">中心经度</label> 
											 <div class="col-md-10">		
												<input type="text" id="lng" class="form-control col-md-12" th:field="*{airEnv.lng}" readonly="readonly"/> 								
											 </div>
										  </div>
										  
										  	<div class="form-group">
											 <label class="col-md-2 control-label">中心纬度</label> 
											 <div class="col-md-10">		
                                                <input type="text"  id="lat" class="form-control col-md-12" th:field="*{airEnv.lat}" readonly="readonly"/> 
											 </div>
										  </div>
										  
										  
										  
										 <div class="form-group">
											 <label class="col-md-2 control-label">相对企业方位</label> 
											 <div class="col-md-10">		
                                              <select  th:field="*{locationDic.id}">
                                              
                                                  <option th:each="locationDic : ${locationDics}" 
                                                     th:value="${locationDic.id}" 
                                                     th:text="${locationDic.location}">方位</option>
                                                </select>	
											 </div>
										  </div>
										  
										   <div class="form-group">
											 <label class="col-md-2 control-label">相对企业距离(米)</label> 
											 <div class="col-md-10">		
                                               <input type="text"  class="form-control col-md-12" th:field="*{distance}" /> 
											 </div>
										  </div>
								
						
								 <div class="form-group">
										
										<div class="col-md-2">
										</div>
										   <div th:if="${view=='modify'||view=='new'}">  
										     <div class="col-md-3">
										      
										      <button class="btn btn-default" name="action" value="yes"><i class="fa fa-check"></i>保存</button>
										    
							                  <button id="_cancel" class="btn btn-default pull-right" name="action" value="no"><i class="fa fa-times"></i>取消</button>

										  </div>
										   </div>
										   
										     <div th:if="${view=='view'}">  
										     <div class="col-md-3">
							                  <button id="_cancel" class="btn btn-default" name="action" value="no"><i class="fa fa-times"></i>返回</button>

										  </div>
										   </div>
										  </div>
										 
										  
										  <input  type="hidden" name="riskSourceId" th:value="${riskSourceId}" /> 
										 
									   </form>
			
						
	
			</div>
			<!-- /mainContentBox -->
		
		</div>
		<!-- /maincontent -->
	</section>

    <div th:include="fragments/m-layout :: footerFragment"></div>
	<!--/PAGE -->
	<!-- JAVASCRIPTS -->
	<!-- Placed at the end of the document so the pages load faster -->
	<!-- JQUERY -->
	<div th:include="fragments/m-layout :: jsFragment"></div>
	<script>
		jQuery(document).ready(function() {		
			App.setPage("allRiskSourceList");
			App.init(); //Initialise plugins and elements
			
		    var config = {
		    	      '#airEnv-select': {no_results_text:'没有检索结果!',search_contains:true}
		    	    }
		    for (var selector in config) {
		        $(selector).chosen(config[selector]);
		      }
			
		    $('#airEnv-select').change(function(){ 
		    	
		    	var airEnvId=$(this).children('option:selected').val();//这就是selected的值 
		    	   $.getAirEnv(1,function(data){
			           $('#airType').val(data.waterEnvType);
			           $('#envFunc').val(data.envFunc);
			           $('#emePerson').val(data.emePerson);
			           $('#emeMobile').val(data.emeMobile);
			           $('#lng').val(data.lng);
			           $('#lat').val(data.lat);
			         });
		    	
		    	}) 
		    	
		  
			
		});
	</script>
	<!-- /JAVASCRIPTS -->
</body>
</html>